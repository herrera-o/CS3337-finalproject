{% extends "base.html" %}
{% load static %}

{% block general-css %}
    <link rel="stylesheet" href="{% static 'styles/general.css' %}" type="text/css">
{% endblock general-css %}

{% block content %}
<div class="viewBook">
    <div class="cover">
        <img class="book-cover" src="{% static book.pic_path %}"/>
        <div class="actions">
            {% if user.is_authenticated %}
                <div class="rate">
                    <text>Rate this book:</text>
                    <a href="{% url 'rate_book' book.id 'true' %}">
                    <img src="https://cdn-icons-png.flaticon.com/512/456/456115.png"></a>
                    <a href="{% url 'rate_book' book.id 'false' %}">
                    <img src="https://cdn-icons-png.flaticon.com/512/9849/9849304.png" class="down"></a>
                </div>
                <form action="{% url 'add_to_cart' book.id %}" method="post">
                {% csrf_token %}
                <button class="addtoCart" type="submit">Add to Cart: ${{ book.price }}</button>
                </form>
            {% else %}
            <p><a href="{% url 'login' %}?next={{ request.path }}">Log in</a> to rate or purchase this book</p>
            {% endif %}

        </div>
    </div>
    <div class="book-info">
        <text class="title">{{ book.name }}</text>
        {% if total_ratings > 0 %}
            <text class="totalRating">{{ positive_ratings }} of {{ total_ratings }} users liked this book ({{ percentage|floatformat:0 }}%)</text>
        {% else %}
            <text class="totalRating">No ratings yet.</text>
        {% endif %}
        <text>Shared by {{ book.username.username|default:"Anonymous" }} on {{ book.publishdate }}</text>
        <text>Book Website: {{ book.web }}</text>
    </div>
<!--    <div class="comments">-->
<!--        <text>See what other users are saying about this book:</text>-->
<!--    </div>-->
</div>

{% endblock content %}
